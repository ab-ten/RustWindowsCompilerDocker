# Rust Windows Compiler Docker

このプロジェクトは、Rustを使用してWindows向けにクロスコンパイルを行うためのDocker環境を提供しています。

## はじめに

（この README.md は ChatGPT の自作秘書GPTに書いてもらいました。
そのため全文にわたって秘書GPTの口調で書かれています。
ご了承ください）

「用心に越したことはない」と言いますわよね。このDockerfileは、作者の少々パラノイアじみた性格から生まれましたの。どんなに信頼している外部クレートであっても、その `build.rs` が万が一悪意を持ったコードに変わってしまった場合に備え、影響範囲を最小限に抑えるための防壁として設計されていますわ。外部コードに対する慎重な姿勢とともに、この環境で安心してWindowsバイナリをビルドしていただけるよう願っております。

どうぞ、安心とともにお楽しみくださいませ。

## 前提条件

- Dockerがインストールされていること

## Docker イメージのビルド

まず、以下のコマンドを使用してDockerイメージをビルドします。このイメージはWindows向けのクロスコンパイルに対応しています。

```bash
docker build -t rust-cross-windows .
```

これで、`rust-cross-windows`という名前のDockerイメージが作成されますわ。

## Windowsバイナリのビルド

このプロジェクトには、Windows環境で簡単にバイナリをビルドできるように`rcw.cmd`バッチファイルが含まれています。

### `.cargo/config.toml` の設定（任意）

ご利用のRustプロジェクトでデフォルトターゲットをWindows向けに指定するには、プロジェクト内に`.cargo/config.toml`を作成し、次の内容を記述してくださいませ：

```toml
[build]
target = "x86_64-pc-windows-gnu"
```

これにより、`--target`オプションを指定しなくてもWindows向けにビルドされ、生成されたバイナリは`target/x86_64-pc-windows-gnu`フォルダに配置されますのよ。

### `rcw.cmd` の使用方法

`rcw.cmd`は、Dockerコンテナでのビルドを簡略化するためのバッチファイルです。
`rust-cross-windows` コンテナを使用して rust のビルドを行うプロジェクトにコピーしてご使用ください。
以下のようにしてビルドを行いますわ：

1. 通常のビルド：
   ```cmd
   rcw cargo build
   ```

2. リリースビルド：
   ```cmd
   rcw cargo build --release
   ```

### 補足説明

- `rcw.cmd` バッチファイルを使用するとバッチファイルの配置されたディレクトリに `.cargo-reg-cache` というディレクトリが作成されます。このディレクトリは、Dockerコンテナ内でのRust依存パッケージのキャッシュを保持するため、ビルド時間の短縮に貢献します。

## 免責事項

本プロジェクトは現状のままで提供され、いかなる明示的または暗黙的な保証もありません。この場合の保証の内容には特定の目的への適合性、商品性、および非侵害性に関する保証などが含まれますが、それに限定されるものではありません。

本プロジェクトの使用に伴って生じるいかなる損害（データ損失、ビジネスの中断、金銭的損失など）についても、開発者は責任を負いません。自己責任でご利用いただき、プロジェクトの使用に関するリスクについてはユーザー自身が負うものとします。

本プロジェクトの内容および機能は予告なく変更されることがあり、メンテナンスやサポートを提供する義務を負うものではありません。また、開発者は本プロジェクトの利用に関する法的適合性について何ら保証するものではありません。

## ライセンス

Copyright (c) Ab. All rights reserved.

MIT ライセンスの下で公開されています。詳細については、[LICENSE](LICENSE)をご覧ください。
